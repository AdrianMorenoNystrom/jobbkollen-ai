<div class="jobs-list">
  <app-page-header
    [title]="'jobs.title' | t"
    [subtitle]="'jobs.subtitle' | t"
    [meta]="jobsCountLabel"
  >
    <div page-actions class="jobs-list__header-actions">
      <a mat-stroked-button color="primary" routerLink="/app/jobs/new">
        <mat-icon aria-hidden="true">add</mat-icon>
        {{ 'jobs.createCta' | t }}
      </a>
    </div>
  </app-page-header>

  <div class="jobs-list__filters">
    <mat-form-field appearance="outline">
      <mat-label>{{ 'jobs.filter.searchLabel' | t }}</mat-label>
      <input
        matInput
        [formControl]="searchControl"
        autocomplete="off"
      />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>{{ 'jobs.filter.statusLabel' | t }}</mat-label>
      <mat-select [formControl]="statusControl">
        @for (status of statusOptions; track status) {
          <mat-option [value]="status">
            @if (status === 'all') {
              {{ 'jobs.filter.allStatuses' | t }}
            } @else {
              {{ statusLabel(status) }}
            }
          </mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>{{ 'jobs.filter.sortLabel' | t }}</mat-label>
      <mat-select [formControl]="sortControl">
        @for (option of sortOptions; track option.value) {
          <mat-option [value]="option.value">{{ option.labelKey | t }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </div>

  <div class="jobs-list__status" aria-live="polite">
    @if (isLoading) {
      <mat-progress-spinner diameter="28" mode="indeterminate"></mat-progress-spinner>
    }
  </div>

  @if (isLoading) {
    <div class="jobs-list__placeholder" aria-hidden="true"></div>
  } @else if (jobs.length === 0) {
    <mat-card class="jobs-list__empty">
      <mat-card-header>
        <mat-card-title>{{ 'jobs.empty.title' | t }}</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p>{{ 'jobs.empty.body' | t }}</p>
      </mat-card-content>
      <mat-card-actions align="end">
        <a mat-flat-button color="primary" routerLink="/app/jobs/new">
          {{ 'jobs.empty.cta' | t }}
        </a>
      </mat-card-actions>
    </mat-card>
  } @else if (filteredJobs.length === 0) {
    <mat-card class="jobs-list__empty">
      <mat-card-header>
        <mat-card-title>{{ 'jobs.noResults.title' | t }}</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p>{{ 'jobs.noResults.body' | t }}</p>
      </mat-card-content>
    </mat-card>
  } @else {
    <div class="jobs-list__grid">
      @for (job of filteredJobs; track job.id) {
        <app-job-card [job]="job" (deleteJob)="confirmDelete($event)"></app-job-card>
      }
    </div>
  }
</div>
